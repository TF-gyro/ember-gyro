<div {{on-click-outside this.ignoreReordering}} class="p-0 mt-5 border-0">
  <div class="d-flex gap-2 justify-content-between align-items-center mb-4">
    <h1
      class="display-6 mb-0 fw-normal text-muted me-auto
        {{if (lte this.typesCount 5) 'text-center' 'text-center'}}"
    >{{this.types.json.modules.webapp.name}}</h1>

    {{#if (gt this.typesCount 5)}}
      {{!-- Button - implemnentation summary --}}
      {{#if this.types.json.modules.webapp.implementation_summary}}
        <button
          type="button"
          id="blueprintConsultationModal-btn"
          data-bs-toggle="modal"
          data-bs-target="#blueprintConsultationModal"
          class="text-capitalize fw-normal border-0 btn btn-outline-{{this.colormodes.inverseMode}} {{ if this.activateReordering 'd-none'}}"
        ><i class="fa-solid fa-circle-info"></i></button>
      {{/if}}

      {{#unless this.activateReordering}}
        <button
          id="edit-track-order"
          type="button"
          {{on "click" this.startWobble}}
          class="text-capitalize fw-normal border-0 btn btn-outline-{{this.colormodes.inverseMode}}"
        ><i class="fa-solid fa-lock"></i></button>
      {{/unless}}
    {{/if}}
  </div>

  {{!-- Track Names header --}}
  {{#unless this.reloadTypes}}
    <div class="d-flex flex-wrap p-0 gap-1" id="track-names">
      {{#if this.types.json.modules.webapp.interfaces}}
      {{else}}
      {{/if}}

      {{#each-in this.types.json.modules as |key type|}}
        {{#if
          (and
            (and type.slug (not-eq type.slug "webapp"))
            (not-eq type.hidden true)
          )
        }}
          <div class="track-name-btn {{if this.activateReordering 'wobble'}}" data-type-slug={{type.slug}}>
            <button
              id="track-{{type.slug}}"
              {{on "click" (fn this.changeType type)}}
              type="button"
              class="text-capitalize fw-normal border-2 btn btn-{{if
                  (eq type.slug this.type.currentType.slug)
                  'primary'
                  (concat 'outline-' this.colormodes.inverseMode)
                }}"
              >{{type.plural}} <span class="badge text-bg-light fw-light rounded-2 small">{{type.total_objects}}</span>
            </button>
          </div>
        {{/if}}
      {{/each-in}}

      {{#if (gt this.typesCount 5)}}
        {{!-- Button - New track --}}
        <button
          id="track-new"
          type="button"
          data-bs-toggle="modal"
          data-bs-target="#newModel"
          class="text-capitalize fw-normal border-2 btn btn-{{this.colormodes.inverseMode}} {{ if this.activateReordering 'd-none'}}"
        ><i class="fa-solid fa-plus"></i></button>
      {{else}}
        <div class="d-flex flex-column align-items-center justify-content-center text-center">
          <div class="ignore-elements my-3 mx-auto text-center">
            <button
              type="button"
              class="btn-lg fw-light fs-5 btn btn-outline-primary dropdown-toggle"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="fa-solid fa-circle-nodes"></i>
              Use a blueprint
              <i class="fa-solid fa-caret-down"></i>
            </button>
            <ul
              class="dropdown-menu dropdown-menu-md-end overflow-y-scroll"
              style="max-height:360px"
              {{did-insert this.blueprints.getBlueprints}}
            >
              <li><h6 class="dropdown-header text-capitalize">Blueprints
                  available</h6></li>
              {{#each this.blueprints.junctionBlueprints as |blueprint|}}
                <li><a
                    {{on
                      "click"
                      (fn
                        this.blueprints.changeBlueprint
                        blueprint.attributes.modules.link
                      )
                    }}
                    href="#"
                    class="dropdown-item fs-5 fw-light"
                  >{{blueprint.attributes.modules.title}}</a></li>
              {{/each}}

              <li><hr class="dropdown-divider" /></li>
              <li><h6 class="dropdown-header text-capitalize">Start Again</h6></li>
              <li><a
                  {{on "click" this.blueprints.clearBlueprint}}
                  class="dropdown-item"
                  href="#"
                >Clear the canvas</a></li>

              {{#if this.blueprints.myBlueprints}}
                <li><hr class="dropdown-divider" /></li>

                <li><h6 class="dropdown-header text-capitalize">Recently used
                    blueprints</h6></li>
                {{#each this.blueprints.myBlueprints as |blueprint|}}
                  <li><a
                      {{on
                        "click"
                        (fn this.blueprints.changeBlueprint blueprint)
                      }}
                      class="dropdown-item"
                      href="#"
                    >{{blueprint.modules.title}}</a></li>
                {{/each}}
              {{/if}}
            </ul>
            <div class="fs-5 mt-4 fw-light mx-auto col-lg-7">Alternatively, you
              can start by adding a
              <a
                class="text-{{this.colormodes.inverseMode}}"
                href="#newModel"
                data-bs-toggle="modal"
              >new track manually</a>
              or by
              <a
                class="text-{{this.colormodes.inverseMode}}"
                href="#blueprintAIPromptModal"
                data-bs-toggle="modal"
              >generating a blueprint</a>
              to help you get started.</div>
          </div>
        </div>
      {{/if}}
    </div>
  {{/unless}}

  {{#if this.activateReordering}}
    <div class="w-100 mt-2 bg-{{this.colormodes.inverseMode}} p-1 d-flex align-items-center justify-content-between rounded animate__animated animate__zoomIn animate__fast">
      <button
        class="btn btn-outline-{{this.colormodes.mode}}"
        type="button"
        {{on "click" this.ignoreReordering}}
      ><i class="fa-solid fa-circle-xmark"></i> Do not save</button>

      <button
        class="btn btn-primary"
        type="button"
        {{on "click" this.saveReordering}}
      ><i class="fa-solid fa-circle-check"></i> Save reordering</button>
    </div>
  {{/if}}
</div>
